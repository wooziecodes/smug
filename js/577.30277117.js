"use strict";(self["webpackChunksmug"]=self["webpackChunksmug"]||[]).push([[577],{6577:function(t,i,e){e.r(i),e.d(i,{default:function(){return Dt}});var n=e(6252),s=e(3577),l=e(9963);const a=(0,n._)("div",{class:"container",id:"my-profile-wording"},[(0,n._)("h1",{id:"profile-text",class:"text-center mt-4"},"My Profile")],-1),d={class:"container-fluid mt-7"},o={class:"card card-profile shadow mt-4"},r={class:"row justify-content-center"},c={class:"card-profile-image mt-3"},g={class:"profilePic"},u={class:"profilepic mt-3 mb-3"},h=["src"],p={key:0,class:"profilepic__content"},m={for:"photo-upload"},f={class:"profilepic__icon"},y=(0,n._)("span",{class:"profilepic__text"},"Edit Photo",-1),w={class:"card-body pt-0 pt-md-4"},_={class:"row justify-content-center"},b={id:"right-side"},k=["textContent"],P={id:"rating",class:"text-center mb-2"},v=(0,n._)("br",null,null,-1),D={class:"mb-3 ml-5 mr-5"},x=(0,n._)("th",null,"Faculty",-1),L={key:0},I={key:1},C=(0,n._)("th",null,"Major",-1),U={key:0},q={key:1},E=(0,n._)("th",null,"Year",-1),M={key:0},j={key:1},V=(0,n._)("th",null,"Email",-1),J={key:0},z={key:1},H=(0,n._)("th",null,"Payment method",-1),N={key:0},A={key:1},F={key:2},O=(0,n._)("option",null,"PayLah",-1),K=(0,n._)("option",null,"PayNow",-1),B=(0,n._)("option",null,"Cash",-1),Y=[O,K,B],W=(0,n._)("th",null,"Description",-1),Z={key:0},R={key:1},S={class:"container",id:"my-profile-wording"},$={class:"d-flex justify-content-center"},G=(0,n._)("h1",{id:"profile-text",class:"text-center mt-4"},"My listings Â ",-1),T={class:"listings-container container d-flex flex-wrap mt-4"},Q={key:0,class:"big-cont"},X={class:"listing-container add-module-container"},tt={class:"container",id:"add-module-input"},it=["src"],et=(0,n._)("option",{value:"",disabled:"",selected:""},"Select module",-1),nt=["value"],st={key:1,class:"big-cont"},lt={class:"listing-container add-module-container"},at={class:"container",id:"add-module-input"},dt=["src"],ot=["value"],rt={class:"about-shape-2"},ct=["src"],gt={class:"about-shape-1"},ut=["src"];function ht(t,i,O,K,B,ht){const pt=(0,n.up)("Navbar"),mt=(0,n.up)("FontAwesomeIcon"),ft=(0,n.up)("font-awesome-icon"),yt=(0,n.up)("ListingComponent");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(pt),a,(0,n._)("div",d,[(0,n._)("div",o,[(0,n._)("div",r,[(0,n._)("div",c,[(0,n._)("div",g,[(0,n._)("div",u,[(0,n._)("img",{class:"profilepic__image",src:B.photo,width:"300",height:"300",alt:"Profibild"},null,8,h),B.editing?((0,n.wg)(),(0,n.iD)("div",p,[(0,n._)("label",m,[(0,n._)("span",f,[(0,n.Wm)(mt,{icon:"fa-solid fa-camera"})]),y]),(0,n._)("input",{type:"file",accept:"image/png, image/jpeg",id:"photo-upload",style:{display:"none"},onChange:i[0]||(i[0]=(...t)=>ht.changePhoto&&ht.changePhoto(...t))},null,32)])):(0,n.kq)("",!0)]),B.editing?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("button",{key:0,type:"button",class:"btn",id:"edit-button",onClick:i[1]||(i[1]=t=>ht.toggleEdit())},"Edit Profile")),B.editing?((0,n.wg)(),(0,n.iD)("button",{key:1,type:"button",class:"btn",id:"save-button",onClick:i[2]||(i[2]=t=>ht.updateData(B.userid))},"Save Profile")):(0,n.kq)("",!0)])])]),(0,n._)("div",w,[(0,n._)("div",_,[(0,n._)("div",b,[(0,n._)("h1",{textContent:(0,s.zw)(B.name),id:"name",class:"text-center"},null,8,k),(0,n._)("div",P,[(0,n.Uk)((0,s.zw)(B.rating)+" ",1),(0,n.Wm)(ft,{icon:"fa-solid fa-star",class:"fa-star"}),(0,n.Uk)(" | "+(0,s.zw)(B.ratingCount)+" ratings ",1)]),v,(0,n._)("table",D,[(0,n._)("tr",null,[x,B.editing?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("td",L,(0,s.zw)(B.faculty),1)),B.editing?((0,n.wg)(),(0,n.iD)("td",I,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":i[3]||(i[3]=t=>B.faculty=t)},null,512),[[l.nr,B.faculty]])])):(0,n.kq)("",!0)]),(0,n._)("tr",null,[C,B.editing?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("td",U,(0,s.zw)(B.major),1)),B.editing?((0,n.wg)(),(0,n.iD)("td",q,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":i[4]||(i[4]=t=>B.major=t)},null,512),[[l.nr,B.major]])])):(0,n.kq)("",!0)]),(0,n._)("tr",null,[E,B.editing?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("td",M,(0,s.zw)(B.year),1)),B.editing?((0,n.wg)(),(0,n.iD)("td",j,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":i[5]||(i[5]=t=>B.year=t)},null,512),[[l.nr,B.year]])])):(0,n.kq)("",!0)]),(0,n._)("tr",null,[V,B.editing?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("td",J,(0,s.zw)(B.email),1)),B.editing?((0,n.wg)(),(0,n.iD)("td",z,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":i[6]||(i[6]=t=>B.email=t)},null,512),[[l.nr,B.email]])])):(0,n.kq)("",!0)]),(0,n._)("tr",null,[H,B.editing||""!=B.payment?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("td",N,"Unspecified")),B.editing?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("td",A,(0,s.zw)(B.payment),1)),B.editing?((0,n.wg)(),(0,n.iD)("td",F,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":i[7]||(i[7]=t=>B.payment=t)},Y,512),[[l.bM,B.payment]])])):(0,n.kq)("",!0)]),(0,n._)("tr",null,[W,B.editing?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("td",Z,(0,s.zw)(B.description),1)),B.editing?((0,n.wg)(),(0,n.iD)("td",R,[(0,n.wy)((0,n._)("textarea",{"onUpdate:modelValue":i[8]||(i[8]=t=>B.description=t),id:"desc",name:"desc"},null,512),[[l.nr,B.description]])])):(0,n.kq)("",!0)])])])])])])]),(0,n._)("div",S,[(0,n._)("div",$,[G,(0,n._)("button",{class:"btn btn-outline-light addListingBtn",onClick:i[9]||(i[9]=t=>ht.toggleAdd())},[(0,n.Wm)(ft,{icon:"fa-solid fa-plus",class:"fa-plus"})])])]),(0,n._)("div",T,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(B.listings,(t=>((0,n.wg)(),(0,n.j4)(yt,{class:"listing-component query",id:t.id,tutor:t.user,code:t.module,prof:t.prof,price:t.price,userID:t.userID,isOwn:!0,onListingId:ht.editListing},null,8,["id","tutor","code","prof","price","userID","onListingId"])))),256))]),B.adding?((0,n.wg)(),(0,n.iD)("div",Q,[(0,n._)("div",X,[(0,n._)("div",tt,[(0,n._)("input",{type:"file",ref:"file",style:{display:"none"},onChange:i[10]||(i[10]=(...t)=>ht.loadPhoto&&ht.loadPhoto(...t))},null,544),(0,n._)("img",{src:B.listingImg,style:{width:"100%","max-height":"119px","max-width":"104.2px","margin-bottom":"8px"},onClick:i[11]||(i[11]=i=>t.$refs.file.click())},null,8,it),(0,n.wy)((0,n._)("select",{class:"select","onUpdate:modelValue":i[12]||(i[12]=t=>B.newMod=t)},[et,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(B.modules,(t=>((0,n.wg)(),(0,n.iD)("option",{value:t.code},(0,s.zw)(t.code)+": "+(0,s.zw)(t.name),9,nt)))),256))],512),[[l.bM,B.newMod]]),(0,n.wy)((0,n._)("input",{class:"add-fields form-control",type:"text",placeholder:"Prof","onUpdate:modelValue":i[13]||(i[13]=t=>B.newProf=t)},null,512),[[l.nr,B.newProf]]),(0,n.wy)((0,n._)("input",{class:"add-fields form-control",type:"text",placeholder:"Price","onUpdate:modelValue":i[14]||(i[14]=t=>B.newPrice=t)},null,512),[[l.nr,B.newPrice]]),(0,n._)("button",{class:"btn btn-outline-light",id:"cancelBtn",onClick:i[15]||(i[15]=t=>ht.close())},"Cancel"),(0,n._)("button",{class:"btn",id:"add-listing-btn",onClick:i[16]||(i[16]=t=>ht.toggleAdd())},"Create")])])])):(0,n.kq)("",!0),B.editingListing?((0,n.wg)(),(0,n.iD)("div",st,[(0,n._)("div",lt,[(0,n._)("div",at,[(0,n._)("input",{type:"file",ref:"file",style:{display:"none"},onChange:i[17]||(i[17]=(...t)=>ht.loadPhoto&&ht.loadPhoto(...t))},null,544),(0,n._)("img",{src:B.listingImg,style:{width:"100%","max-height":"119px","max-width":"104.2px","margin-bottom":"8px"},onClick:i[18]||(i[18]=i=>t.$refs.file.click())},null,8,dt),(0,n.wy)((0,n._)("select",{class:"select","onUpdate:modelValue":i[19]||(i[19]=i=>t.editMod=i)},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(B.modules,(t=>((0,n.wg)(),(0,n.iD)("option",{value:t.code},(0,s.zw)(t.code)+": "+(0,s.zw)(t.name),9,ot)))),256))],512),[[l.bM,t.editMod]]),(0,n.wy)((0,n._)("input",{class:"add-fields form-control",type:"text",placeholder:"Prof","onUpdate:modelValue":i[20]||(i[20]=t=>B.editProf=t)},null,512),[[l.nr,B.editProf]]),(0,n.wy)((0,n._)("input",{class:"add-fields form-control",type:"text",placeholder:"Price","onUpdate:modelValue":i[21]||(i[21]=t=>B.editPrice=t)},null,512),[[l.nr,B.editPrice]]),(0,n._)("button",{class:"btn",id:"cancelListingBtn",onClick:i[22]||(i[22]=t=>ht.closeEdit())},"Cancel"),(0,n._)("button",{class:"btn btn-warning",id:"deleteBtn",onClick:i[23]||(i[23]=t=>ht.deleteListing())},"Delete"),(0,n._)("button",{class:"btn",id:"editListingBtn",onClick:i[24]||(i[24]=t=>ht.toggleEditListing())},"Confirm")])])])):(0,n.kq)("",!0),(0,n._)("div",rt,[(0,n._)("img",{src:e(1983)},null,8,ct)]),(0,n._)("div",gt,[(0,n._)("img",{src:e(1442)},null,8,ut)])],64)}e(7658);var pt=e(7685),mt=e(6690),ft=e(6257),yt=e(2392),wt=e(803),_t=e(1153),bt=e(7810),kt={data(){return{listings:[],userid:"",name:"",photo:"",rating:0,ratingCount:0,faculty:"",major:"",year:"",email:"",payment:"",description:"",editing:!1,id:"",imgName:"",adding:!1,editingListing:!1,listingImg:e(518),listingId:"",pic:null,newMod:"",newProf:"",newPrice:"",modules:[],editProf:"",editPrice:""}},created(){(0,mt.Aj)(yt.I,(t=>{t?(this.getUser(t.uid),this.getListings(t.uid),this.loadModules()):console.log("Not signed in")}))},methods:{async loadModules(){const t=await(0,ft.PL)((0,ft.IO)((0,ft.hJ)(yt.db,"module")));t.forEach((t=>{this.modules.push(t.data())}))},async getListings(t){const i=(0,ft.IO)((0,ft.hJ)(yt.db,"listings"),(0,ft.ar)("userID","==",t));(0,ft.cf)(i,(t=>{this.listings=[],t.forEach((t=>{let i=t.data();i["id"]=t.id,this.listings.push(i)}))}))},async getUser(t){const i=await(0,ft.PL)((0,ft.IO)((0,ft.hJ)(yt.db,"users"),(0,ft.ar)("uid","==",t)));i.forEach((t=>{this.id=t.id,this.userid=t.data().uid,this.name=t.data().user,this.rating=t.data().rating.toFixed(2),this.ratingCount=t.data().ratingCount,this.faculty=t.data().faculty,this.major=t.data().major,this.year=t.data().year,this.email=t.data().email,this.payment=t.data().payment,this.description=t.data().description;var i=(0,_t.iH)(yt.t,"users");(0,_t.aF)(i).then((i=>{i.items.forEach((i=>{const e=i.name.split(".")[0];e==t.id&&(this.imgName=i.name,(0,_t.Jt)((0,_t.iH)(yt.t,"users/"+i.name)).then((t=>{this.photo=t})))}))}))}))},async updateData(t){const i=await(0,ft.PL)((0,ft.IO)((0,ft.hJ)(yt.db,"users"),(0,ft.ar)("uid","==",t))),e={faculty:this.faculty,major:this.major,year:this.year,payment:this.payment,description:this.description};i.forEach((t=>{const i=(0,ft.JU)(yt.db,"users",t.id);(0,ft.r7)(i,e).then((()=>{console.log("updated"),this.toggleEdit()}))}))},async toggleEdit(){this.editing?this.editing=!1:this.editing=!0},close(){this.adding=!1},closeEdit(){this.editingListing=!1},async toggleAdd(){if(this.adding){this.newPrice.includes(".")?this.newPrice=parseFloat(this.newPrice):this.newPrice=parseInt(this.newPrice);const t=(0,ft.IO)((0,ft.hJ)(yt.db,"users"),(0,ft.ar)("uid","==",this.userid)),i=await(0,ft.PL)(t);i.forEach((t=>{const i={module:this.newMod,price:this.newPrice,prof:this.newProf,user:t.data().user,userID:this.userid};(0,ft.ET)((0,ft.hJ)(yt.db,"listings"),i).then((t=>{if(null==this.pic){this.pic=e(518);const i=(0,_t.iH)(yt.t,"listings/"+t.id);(0,_t.sf)(i,this.pic,"data_url").then((()=>{alert("Listing created!"),this.adding=!1}))}else{const i=(0,_t.iH)(yt.t,"listings/"+t.id);(0,_t.KV)(i,this.pic).then((()=>{alert("Listing created!"),this.adding=!1}))}}))}))}else this.adding=!0},async changePhoto(t){const i=(0,_t.iH)(yt.t,"users/"+this.imgName);(0,_t.oq)(i).then((()=>{const i=(0,_t.iH)(yt.t,"users/"+this.id);(0,_t.KV)(i,t.target.files[0]).then((()=>{this.getUser(this.userid)}))}))},async deleteListing(){await(0,ft.oe)((0,ft.JU)(yt.db,"listings",this.listingId)),this.editingListing=!1},toggleEditListing(){(0,_t.Jt)((0,_t.iH)(yt.t,"listings/"+this.listingId)).then((t=>{if(t!=this.listingImg){const t=(0,_t.iH)(yt.t,"listings/"+this.listingId);(0,_t.oq)(t).then((()=>{(0,_t.KV)(storageref,this.pic).then((()=>{const t=(0,ft.JU)(yt.db,"listings",this.listingId);(0,ft.r7)(t,{module:this.editMod,price:this.editPrice,prof:this.editProf}).then((()=>{alert("Updated!"),this.editingListing=!1}))}))}))}else{const t=(0,ft.JU)(yt.db,"listings",this.listingId);(0,ft.r7)(t,{module:this.editMod,price:this.editPrice,prof:this.editProf}).then((()=>{alert("Updated!"),this.editingListing=!1}))}}))},loadPhoto(t){this.pic=t.target.files[0];var i=new FileReader;i.readAsDataURL(this.pic),i.onload=()=>this.listingImg=i.result},async editListing(t){this.listingId=t;const i=await(0,ft.PL)((0,ft.IO)((0,ft.hJ)(yt.db,"listings")));i.forEach((i=>{i.id==t&&(this.editMod=i.data().module,this.editProf=i.data().prof,this.editPrice=i.data().price,(0,_t.Jt)((0,_t.iH)(yt.t,"listings/"+t)).then((t=>{this.listingImg=t})),this.editingListing=!0)}))}},components:{ListingComponent:pt.Z,Navbar:wt.Z,FontAwesomeIcon:bt.GN}},Pt=e(3744);const vt=(0,Pt.Z)(kt,[["render",ht]]);var Dt=vt},1442:function(t,i,e){t.exports=e.p+"img/about-shape-1.6b82b09b.svg"}}]);
//# sourceMappingURL=577.30277117.js.map